(this["webpackJsonpdemo-game"]=this["webpackJsonpdemo-game"]||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var r=c(4),n=c.n(r),a=c(28),o=c.n(a),i=(c(34),c(13)),u=c(43),s=c(19),j=(c(35),c(8)),b=c(6),d=c(7),O=c(9),m=c(27),f={KeyW:"moveForward",KeyS:"moveBackward",KeyA:"moveLeft",KeyD:"moveRight",Space:"jump"};var l=function(){var e=Object(r.useState)({moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,jump:!1}),t=Object(j.a)(e,2),c=t[0],n=t[1],a=Object(r.useCallback)((function(e){f[e.code]&&n((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(d.a)({},f[e.code],!1))}))}),[n]),o=Object(r.useCallback)((function(e){f[e.code]&&n((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(d.a)({},f[e.code],!0))}))}),[n]);return Object(m.a)("w,a,s,d,space",o,{keydown:!0,keyup:!1},[o]),Object(m.a)("w,a,s,d,space",a,{keyup:!0,keydown:!1},[a]),c};function p(e){return e.getWorldPosition(e.position)}var v=function(e){var t=e.target,c=(Object(r.useRef)(new b.Vector3),Object(r.useRef)(new b.Vector3)),n=Object(r.useRef)(new b.Vector3),a=Object(i.c)().camera;return Object(i.b)((function(e,r){var o=function(e){var t=new b.Vector3(-0,10,-15);return t.applyQuaternion(e.quaternion),t.add(p(e)),t.y=5,t}(t),i=function(e){var t=new b.Vector3(0,5,20);return t.applyQuaternion(e.quaternion),t.add(p(e)),t}(t),u=1-Math.pow(.01,r);n.current.lerp(o,u),c.current.lerp(i,u),a.position.copy(n.current),a.lookAt(c.current)})),null},h=c(10),y=function(){var e=Object(i.c)().camera,t=Object(s.b)((function(){return{position:[0,2,0],mass:1,type:"Dynamic"}})),c=Object(j.a)(t,2),n=c[0],a=c[1],o=Object(r.useRef)([0,0,0]),u=l(),d=u.jump,O=u.moveBackward,m=u.moveForward,f=u.moveLeft,p=u.moveRight;return Object(r.useEffect)((function(){a.velocity.subscribe((function(e){o.current=e}))}),[a.velocity]),Object(i.b)((function(){if(d||O||m||f||p){var t=new b.Vector3,c=new b.Vector3(0,0,(O?1:0)-(m?1:0)),r=new b.Vector3((f?1:0)-(p?1:0),0,0);t.subVectors(c,r).normalize().multiplyScalar(6).applyEuler(e.rotation),a.velocity.set(t.x,o.current[1],t.z),d&&Math.abs(Number(o.current[1].toFixed(2)))<.05&&a.velocity.set(o.current[0],8,o.current[2])}})),Object(h.jsxs)(h.Fragment,{children:[n.current&&Object(h.jsx)(v,{target:n.current}),Object(h.jsxs)("mesh",{ref:n,castShadow:!0,receiveShadow:!0,children:[Object(h.jsx)("boxBufferGeometry",{args:[1,1,1]}),Object(h.jsx)("meshStandardMaterial",{color:"red"})]})]})},w=function(e){var t=Object(s.c)((function(){return Object(O.a)({rotation:[-Math.PI/2,0,0],position:[0,-1,0],type:"Static"},e)})),c=Object(j.a)(t,1)[0];return Object(h.jsxs)("mesh",{ref:c,receiveShadow:!0,children:[Object(h.jsx)("planeBufferGeometry",{attach:"geometry",args:[100,100]}),Object(h.jsx)("meshStandardMaterial",{attach:"material",color:"blue"})]})};var x=function(){return Object(h.jsx)("div",{id:"app",children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(s.a,{gravity:[0,-30,0],children:[Object(h.jsx)(u.a,{sunPosition:[100,20,100]}),Object(h.jsx)("ambientLight",{intensity:.25}),Object(h.jsx)("pointLight",{castShadow:!0,intensity:.7,position:[100,100,100]}),Object(h.jsx)(y,{}),Object(h.jsx)(w,{})]})})})};o.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e5dc6587.chunk.js.map